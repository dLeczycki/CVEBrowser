import React, { useEffect, useContext } from 'react';
import { Stack, useBoolean } from '@chakra-ui/react';

import { BulletinContext } from '../../context/BulletinContext';

import AddCVEToBulletinButton from './AddCVEToBulletinButton';
import RemoveCVEToBulletinButton from './RemoveCVEFromBulletinButton';

const BulletinButtonsPanel = (props) => {
  const { cve, ...style } = props;
  const { isCveInBulletin } = useContext(BulletinContext);
  const [isButtonDisabled, setButtonDisabled] = useBoolean(false);

  useEffect(() => {
    if (isCveInBulletin(cve)) setButtonDisabled.on();
  }, []);

  return (
    <Stack {...style}>
      <AddCVEToBulletinButton
        isButtonDisabled={isButtonDisabled}
        setButtonDisabled={setButtonDisabled}
        cve={cve}
      />
      <RemoveCVEToBulletinButton
        isButtonDisabled={isButtonDisabled}
        setButtonDisabled={setButtonDisabled}
        cve={cve}
      />
    </Stack>
  );
};

export default BulletinButtonsPanel;
