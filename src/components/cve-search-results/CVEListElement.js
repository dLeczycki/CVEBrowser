import React from 'react';
import { useHistory } from 'react-router-dom';
import {
  ListItem, Heading, Text, Divider, Flex, Link as ChakraLink,
} from '@chakra-ui/react';
import { useTranslation } from 'react-i18next';

import BulletinButtonsPanel from './BulletinButtonsPanel';
import Badge from '../../common/Badge';

const CVEListElement = (props) => {
  const { t } = useTranslation();
  const publishDateT = t('cve-search-results.publish-date');
  const lastModificationDateT = t('cve-search-results.last-modification-date');
  const history = useHistory();

  const {
    cveId, description, cvssV3Metric, lastModifiedDate, publishedDate,
  } = props;

  const handleViewCveDetails = (id) => {
    history.push({
      pathname: `/cve-details/${id}`,
      state: props,
    });
  };

  return (
    <ListItem key={cveId} p={4}>
      <Heading as="h4" size="md">
        <ChakraLink onClick={() => handleViewCveDetails(cveId)}>
          {cveId}
        </ChakraLink>
      </Heading>
      <Badge cvssV3Metric={cvssV3Metric} mt={1} />
      <Flex flexDirection={['column', 'column', 'row']} alignItems="center">
        <Text fontSize="md" flexBasis={['unset', 'unset', '80%', '80%', '90%']} p={2}>
          {description}
        </Text>
        <BulletinButtonsPanel cve={props} direction="column" spacing={2} mb={2} />
      </Flex>
      <Flex fontSize="sm">
        <Flex flexBasis={['50%', '50%', 'unset']} justifyContent={['center', 'center', 'flex-start']}>
          <Text>
            {publishDateT}
            :
            {' '}
          </Text>
          <Text ml={1} fontWeight="bold">{publishedDate}</Text>
        </Flex>
        <Flex ml={[0, 0, 4]} flexBasis={['50%', '50%', 'unset']} justifyContent={['center', 'center', 'flex-start']}>
          <Text>
            {lastModificationDateT}
            :
            {' '}
          </Text>
          <Text ml={1} fontWeight="bold">{lastModifiedDate}</Text>
        </Flex>
      </Flex>
      <Divider />
    </ListItem>
  );
};

export default CVEListElement;
