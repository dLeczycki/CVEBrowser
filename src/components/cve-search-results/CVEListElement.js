import React from 'react';
import {
  ListItem, Heading, Text, Divider, Flex,
} from '@chakra-ui/react';
import { useTranslation } from 'react-i18next';

import Badge from '../../common/Badge';
import Button from '../../common/Button';

const CVEListElement = (props) => {
  const { t } = useTranslation();
  const addToBulletinT = t('cve-search-results.add-to-bulletin');
  const publishDateT = t('cve-search-results.publish-date');
  const lastModificationDateT = t('cve-search-results.last-modification-date');

  const {
    cveId, description, cvssV3Metric, lastModifiedDate, publishedDate,
  } = props;

  const handleAddToBulletin = () => {
    console.log(props);
  };

  return (
    <ListItem key={cveId} p={4}>
      <Heading as="h4" size="md">{cveId}</Heading>
      <Badge cvssV3Metric={cvssV3Metric} mt={1} />
      <Flex flexDirection={['column', 'column', 'row']} alignItems="center">
        <Text fontSize="md" flexBasis={['unset', 'unset', '80%', '80%', '90%']} p={2}>
          {description}
        </Text>
        <Button
          mt={[2, 2, 0]}
          mb={2}
          flexBasis={['unset', 'unset', '20%', '20%', '10%']}
          onClick={handleAddToBulletin}
        >
          {addToBulletinT}
        </Button>
      </Flex>
      <Flex fontSize="sm">
        <Flex flexBasis={['50%', '50%', 'unset']} justifyContent={['center', 'center', 'flex-start']}>
          <Text>
            {publishDateT}
            :
            {' '}
          </Text>
          <Text ml={1} fontWeight="bold">{publishedDate.substring(0, 10)}</Text>
        </Flex>
        <Flex ml={[0, 0, 4]} flexBasis={['50%', '50%', 'unset']} justifyContent={['center', 'center', 'flex-start']}>
          <Text>
            {lastModificationDateT}
            :
            {' '}
          </Text>
          <Text ml={1} fontWeight="bold">{lastModifiedDate.substring(0, 10)}</Text>
        </Flex>
      </Flex>
      <Divider />
    </ListItem>
  );
};

export default CVEListElement;
