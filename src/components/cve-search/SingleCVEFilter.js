import React, { useContext } from 'react';
import {
  Box, InputGroup, Input, InputLeftElement, InputRightElement,
} from '@chakra-ui/react';
import { useTranslation } from 'react-i18next';

import { SettingsContext } from '../../context/SettingsContext';

import { EyeIcon, TimesIcon } from '../../common/Icons';
import Tooltip from '../../common/Tooltip';

const SingleCVEFilter = ({ cveId, setCVEId, ...style }) => {
  const { t } = useTranslation();
  const singleCVEFilterTitleT = t('cve-search.single-cve-title');
  const singleCVEFilterExplanationT = t('cve-search.single-cve-explanation');

  const { errorColor } = useContext(SettingsContext);

  const handleChange = (e) => {
    setCVEId(e.target.value);
  };

  const handleClearInput = () => {
    setCVEId('');
  };

  return (
    <Box as="form" autoComplete="off" textAlign="center" {...style}>
      <Tooltip title={singleCVEFilterTitleT} message={singleCVEFilterExplanationT} />
      <InputGroup
        maxW="300px"
        mx="auto"
        mt={[3, 3, 6]}
      >
        <InputLeftElement
          zIndex={0}
        >
          <EyeIcon
            pointerEvents="none"
            color="gray.600"
            fontSize="1.2em"
          />
        </InputLeftElement>
        <Input
          placeholder="CVE"
          value={cveId}
          onChange={handleChange}
        />
        <InputRightElement>
          <TimesIcon
            onClick={handleClearInput}
            color={errorColor}
            cursor="pointer"
          />
        </InputRightElement>
      </InputGroup>
    </Box>
  );
};

export default SingleCVEFilter;
