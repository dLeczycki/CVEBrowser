import React from 'react';
import {
  Box, Center, FormControl, FormLabel, Tooltip,
} from '@chakra-ui/react';
import 'react-datepicker/dist/react-datepicker.css';
import { useTranslation } from 'react-i18next';

import DatePicker from '../../common/DatePicker';
import { InfoIcon } from '../../common/Icons';

const PublishedDateFilter = ({ publishedDateRange, setPublishedDateRange, ...style }) => {
  const { t } = useTranslation();
  const publishDateRangeT = t('cve-browser.publish-date-range');
  const publishStartDateT = t('cve-browser.publish-start-date');
  const publishEndDateT = t('cve-browser.publish-end-date');
  const publishDateExplanationT = t('cve-browser.publish-date-explanation');

  const { startDate, endDate } = publishedDateRange;
  const setStartDate = (newStartDate) => {
    setPublishedDateRange((prev) => ({ ...prev, startDate: newStartDate }));
  };
  const setEndDate = (newEndDate) => {
    setPublishedDateRange((prev) => ({ ...prev, endDate: newEndDate }));
  };

  return (
    <Box as="form" autoComplete="off" {...style}>
      <Tooltip label={publishDateExplanationT} fontSize="md">
        <Center as="strong" textAlign="center">
          {publishDateRangeT}
          <InfoIcon ml={2} />
        </Center>
      </Tooltip>
      <FormControl mt={4} mx="auto" maxW="400px">
        <FormLabel htmlFor="published-date">{publishStartDateT}</FormLabel>
        <DatePicker
          id="published-start-date"
          selectedDate={startDate}
          onChange={(date) => setStartDate(date)}
          showPopperArrow
        />
      </FormControl>
      <FormControl mt={4} mx="auto" maxW="400px">
        <FormLabel htmlFor="published-date">{publishEndDateT}</FormLabel>
        <DatePicker
          id="published-end-date"
          selectedDate={endDate}
          onChange={(date) => setEndDate(date)}
          showPopperArrow
        />
      </FormControl>
    </Box>
  );
};

export default PublishedDateFilter;
