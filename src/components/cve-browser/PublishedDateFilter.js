import React from 'react';
import {
  Box, FormControl, FormLabel,
} from '@chakra-ui/react';
import 'react-datepicker/dist/react-datepicker.css';
import { useTranslation } from 'react-i18next';

import DatePicker from '../../common/DatePicker';
import Tooltip from '../../common/Tooltip';

const PublishedDateFilter = ({ publishedDateRange, setPublishedDateRange, ...style }) => {
  const { t } = useTranslation();
  const publishedDateRangeTitleT = t('cve-browser.published-date-range-title');
  const publishedStartDateT = t('cve-browser.published-start-date');
  const publishedEndDateT = t('cve-browser.published-end-date');
  const publishedDateRangeExplanationT = t('cve-browser.published-date-range-explanation');

  const { startDate, endDate } = publishedDateRange;
  const setStartDate = (newStartDate) => {
    setPublishedDateRange((prev) => ({ ...prev, startDate: newStartDate }));
  };
  const setEndDate = (newEndDate) => {
    setPublishedDateRange((prev) => ({ ...prev, endDate: newEndDate }));
  };

  return (
    <Box as="form" autoComplete="off" {...style}>
      <Tooltip title={publishedDateRangeTitleT} message={publishedDateRangeExplanationT} />
      <FormControl mt={4} mx="auto" maxW="400px">
        <FormLabel htmlFor="published-date">{publishedStartDateT}</FormLabel>
        <DatePicker
          id="published-start-date"
          selectedDate={startDate}
          onChange={(date) => setStartDate(date)}
          showPopperArrow
        />
      </FormControl>
      <FormControl mt={4} mx="auto" maxW="400px">
        <FormLabel htmlFor="published-date">{publishedEndDateT}</FormLabel>
        <DatePicker
          id="published-end-date"
          selectedDate={endDate}
          onChange={(date) => setEndDate(date)}
          showPopperArrow
        />
      </FormControl>
    </Box>
  );
};

export default PublishedDateFilter;
